<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="ja">
<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta http-equiv="content-language" content="ja">
	<meta http-equiv="content-style-type" content="text/css">
	<meta http-equiv="content-script-type" content="text/javascript">
	<title>たいまー</title>
	<script type="text/javascript">
var selectTime = 0;
var countTime = null;

function startTimer(){
	if(countTime != null){
		alert( "うごいてるー" );
	}else{
		var mySelect = document.Form.selector.selectedIndex;
		selectTime = document.Form.selector.options[mySelect].value - 0;
		countTime = setInterval ( setTimer, 1000 );
	}
}

function setTimer(){
	selectTime = selectTime - 1;
	document.getElementById( "countdown" ).innerHTML = getRestTimeText() + "<br>Stopをおすととまります";
	if ( selectTime == 0 ){
		clearInterval( countTime );
		alert( "終了ー" );
		countTime = null;
		document.getElementById( "countdown" ).innerHTML = getRestTimeText() + "<br>Goをおすとカウントダウンがはじまります";
	}
}

function stopTimer(){
	if(countTime != null){
		clearInterval(countTime);
		countTime = null;
		document.getElementById( "countdown" ).innerHTML = getRestTimeText() + "<br>Goをおすとはじめからカウントダウンしなおします";
		selectTime = 0;
	}
}

function getRestTimeText() {
	var minutes = Math.floor(selectTime / 60);
	var seconds = selectTime % 60;
	return "残り時間：" + minutes + "分"+ seconds + "秒";
}

</script>
</head>
<body>
	<form name="Form">
		<div align="center">
			<h1>たいまー</h1>
			<p>
				<select name="selector">
					<option value="300">よくあるLT（5分）</option>
					<option value="180">みじかめ（3分）</option>
					<option value="600">すこしながめ（10分）</option>
					<option value="1200">ちょっとながめ（20分）</option>
					<option value="1800">ながめ（30分）</option>
				</select>
				<br>
				<input type="button" value="GO!" onclick="startTimer()">
				<input type="button" value="STOP!" onclick="stopTimer()">
				<br></p>
			<p>
				<span id="countdown">Goをおすとカウントダウンがはじまります</span>
			</p>
			<input type="button" value="閉じる" onclick="window.close()"></div>
	</form>
</body>
</html>